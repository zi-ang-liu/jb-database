# 操作記述

## リレーショナル代数

### 和両立

リレーション$R(A_1, A_2, \ldots, A_n)$とリレーション$S(B_1, B_2, \ldots, B_m)$が和両立（union compatible）とは，次の二つの条件を満たすことである．

1. $n = m$．
2. $\text{dom}(A_i) = \text{dom}(B_i)$であり，$1 \leq i \leq n$．

:::{admonition} Example

ある大学の学生データベースには，2024年度入学生のデータを格納するリレーション`学生2024`と，2025年度入学生のデータを格納するリレーション`学生2025`がある．

**学生2024**
| 学籍番号 | 氏名     | 学科       |
| -------- | -------- | ---------- |
| 202401   | 山田太郎 | 情報工学科 |
| 202402   | 田中花子 | 情報工学科 |
| ...      | ...      | ...        |

**学生2025**
| 学籍番号 | 氏名     | 学科       |
| -------- | -------- | ---------- |
| 202501   | 佐藤桃子 | 情報工学科 |
| 202502   | 鈴木一郎 | 情報工学科 |
| ...      | ...      | ...        |

`学生2024`と`学生2025`の次数は共に3であり，それぞれの属性の定義域は共通であるため，これらは和両立である．

:::

:::{admonition} Example

A社とB社の社員を表すリレーション`A社の社員`と`B社の社員`がある．A社の社員が事務部と営業部のどちらかに所属するのに対し，B社の社員が開発部と研究部のどちらかに所属するとする．

- A社の社員(社員番号, 氏名, 部署)
- B社の社員(社員番号, 氏名, 部署)

A社とB社の部署の定義域は異なるため，これらは和両立ではない．

:::


<!-- \begin{frame}{和集合演算}
    \begin{block}{和集合演算}
        $R$と$S$を和両立なリレーションとするとき，$R$と$S$の和集合は，$R \cup S$で表す．その定義は次の通りである．
        $$R \cup S = \{t \mid t \in R \text{ or } t \in S\}$$
    \end{block}
\end{frame}

\begin{frame}{差集合演算}
    \begin{block}{差集合演算}
        $R$と$S$を和両立なリレーションとするとき，$R$と$S$の差集合は，$R - S$で表す．その定義は次の通りである．
        $$R - S = \{t \mid t \in R \text{ and } t \notin S\}$$
    \end{block}
\end{frame}

\begin{frame}{共通集合演算}
    \begin{block}{共通集合演算}
        $R$と$S$を和両立なリレーションとするとき，$R$と$S$の共通集合は，$R \cap S$で表す．その定義は次の通りである．
        $$R \cap S = \{t \mid t \in R \text{ and } t \in S\}$$
    \end{block}
\end{frame}

\begin{frame}{直積演算}
    \begin{block}{直積演算}
        $R(A_1, A_2, \ldots, A_n)$と$S(B_1, B_2, \ldots, B_m)$をリレーションとするとき，$R$と$S$の直積は，$R \times S$で表す．その定義は次の通りである．
        $$R \times S = \{(r, s) \mid r \in R \text{ and } s \in S\}$$
    \end{block}
\end{frame} -->

### 和集合演算

$R$と$S$を和両立なリレーションとするとき，$R$と$S$の和集合は，$R \cup S$で書く．その定義は次の通りである．

$$R \cup S = \{t \mid t \in R \text{ or } t \in S\}$$

すなわち，$R$と$S$の和集合は，$R$または$S$に属するタプル全体の集合である．

:::{admonition} Example

ある大学は工学部と理学部を持っており，それぞれの学生を表すリレーション`工学部学生`と`理学部学生`がある．

- 工学部学生(学籍番号, 氏名, 学科)
- 理学部学生(学籍番号, 氏名, 学科)

`工学部学生`と`理学部学生`の和集合は，その大学の全学生を表すリレーションである．

:::

:::{admonition} Example

ある大学のプログラミングとデータベースの授業を受講する学生を表すリレーション`プログラミング`と`データベース`がある．

プログラミング(学籍番号, 氏名, 学科)
| 学籍番号 | 氏名     | 学科       |
| -------- | -------- | ---------- |
| 202464   | 田中花子 | 機械工学科 |
| 202487   | 山田太郎 | 機械工学科 |
| ...      | ...      | ...        |

データベース(学籍番号, 氏名, 学科)
| 学籍番号 | 氏名     | 学科       |
| -------- | -------- | ---------- |
| 202464   | 田中花子 | 機械工学科 |
| 202490   | 佐藤次郎 | 情報工学科 |
| ...      | ...      | ...        |

`プログラミング`と`データベース`の和集合は，プログラミングまたはデータベースの授業を受講する学生を表すリレーションである．

| 学籍番号 | 氏名     | 学科       |
| -------- | -------- | ---------- |
| 202464   | 田中花子 | 機械工学科 |
| 202487   | 山田太郎 | 機械工学科 |
| 202490   | 佐藤次郎 | 情報工学科 |
| ...      | ...      | ...        |

集合は異なる元の集まりであるため，重複するタプルは除かれる．

:::


### 差集合演算

$R$と$S$を和両立なリレーションとするとき，$R$と$S$の差集合は，$R - S$で書く．その定義は次の通りである．

$$R - S = \{t \mid t \in R \text{ and } t \notin S\}$$

すなわち，$R$に属し，$S$に属さないタプル全体の集合である．

